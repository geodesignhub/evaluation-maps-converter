{% extends "layout.html" %} {% block body %}
<p>A utility to convert and analyze Shapefiles for Evaluation maps into GeoJSON that is compatible with Geodesign Hub.</p>
<form id="upload-file" method="post" enctype="multipart/form-data">
    <fieldset>
        <label for="file">Select a file</label>
        <input name="file" type="file">
    </fieldset>
    <fieldset>
        <button id="upload-file-btn" type="button">Upload</button>
    </fieldset>
</form>
{% endblock %} {% block footer %}
<script type="text/javascript">
    $(function() {
        $('#upload-file-btn').click(function() {
            var form_data = new FormData($('#upload-file')[0]);

            var promise = $.ajax({
                type: 'POST',
                url: '/upload',
                data: form_data,
                contentType: false,
                cache: false,
                processData: false,
            });
            promise.done(function(data) {
                console.log('OK');
                console.log(data);
            });
            promise.fail(function(data) {
                console.log('error');
                console.log(data.msg);

            });
        });
    });
</script>
{% endblock %}